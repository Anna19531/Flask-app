{% extends "layout.html" %}
{% block content %}
<body>

    <h2>Today</h2>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul class=flashes>
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <h4> Select hours for school and personal tasks </h4>
    <form method = "POST" action = "/today">
        {{ form.csrf_token }}
        {{ form.school.label }} {{ form.school }}
        {{ form.personal.label }} {{ form.personal }}
        <input type = "hidden" name = "action" value = "select">
        <input type="submit" value="Submit">
    </form>

    <h2> Today's Tasks</h2>
    <div class = "w3-card w3-container">
        <h4> School </h4>
        <table class = "w3-table w3-striped">
            <tr>
                <th>Done?</th>
                <th>Task</th>
                <th>Description</th>
                <th>Date</th>
                <th>Type</th>
                <th>Event</th>
                <th>Hours</th>
            </tr>
            {% for task in school_tasks %}
            <tr>
                <td><form method = "POST" action = "/today"><input type = "checkbox" name = "task" value = "{{ task.id }}"></td>
                <label for="{{ task.id }}"><td>{{ task.name }}</td></label>
                <td>{{ task.description }}</td>
                <td>{{ task.date }}</td>
                <td>{{ task.type }}</td>
                <td>{{ task.event }}</td>
                <td>{{ task.hours }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <br>

    <div class = "w3-card w3-container">
        <h4> Personal </h4>
        <table class = "w3-table w3-striped">
            <tr>
                <th>Done?</th>
                <th>Task</th>
                <th>Description</th>
                <th>Date</th>
                <th>Type</th>
                <th>Event</th>
                <th>Hours</th>
            </tr>
            {% for task in personal_tasks %}
            <tr>
                <td><input type = "checkbox" name = "task" value = "{{ task.id }}"></td>
                <label for="{{ task.id }}"><td>{{ task.name }}</td></label>
                <td>{{ task.description }}</td>
                <td>{{ task.date }}</td>
                <td>{{ task.type }}</td>
                <td>{{ task.event }}</td>
                <td>{{ task.hours }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <input type = "hidden" name = "action" value = "done">
    <input type = "submit" value = "Submit">
    </form>

    <h4> Completed </h4>
    <div class = "w3-card w3-container">
        <table class = "w3-table w3-striped">
            <tr>
                <th>Done?</th>
                <th>Task</th>
                <th>Description</th>
                <th>Date</th>
                <th>Type</th>
                <th>Event</th>
                <th>Hours</th>
            </tr>
            {% for task in completed %}
            <tr>
                <td><form method = "POST" action = "/today"><input type = "checkbox" name = "task_done" value = "{{ task.id }}" checked></td>
                <label for="{{ task.id }}"><td>{{ task.name }}</td></label>
                <td>{{ task.description }}</td>
                <td>{{ task.date }}</td>
                <td>{{ task.type }}</td>
                <td>{{ task.event }}</td>
                <td>{{ task.hours }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <input type = "hidden" name = "action" value = "undone">
    <input type = "submit" value = "Submit">

</body>
</html>
{% endblock %}

